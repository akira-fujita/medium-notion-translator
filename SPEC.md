# medium-notion-translator ä»•æ§˜æ›¸

> **ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 0.1.0
> **æœ€çµ‚æ›´æ–°**: 2025-02-12
> **ä½œæˆè€…**: Akira Fujita
> **å¯¾è±¡èª­è€…**: é–‹ç™ºè€…ï¼ˆå°†æ¥ã®è‡ªåˆ†ã‚’å«ã‚€ï¼‰ã€AI ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ

---

## 1. ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆæ¦‚è¦

### 1.1 ä½•ã‚’ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã‹

Medium ã®è‹±èªžæŠ€è¡“è¨˜äº‹ã‚’æ—¥æœ¬èªžã«ç¿»è¨³ã—ã€Notion ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«æ§‹é€ åŒ–ã•ã‚ŒãŸãƒšãƒ¼ã‚¸ã¨ã—ã¦è‡ªå‹•ç™»éŒ²ã™ã‚‹ CLI ãƒ„ãƒ¼ãƒ«ã€‚
Engineering Manager ãŒæŠ€è¡“ãƒŠãƒ¬ãƒƒã‚¸ã‚’åŠ¹çŽ‡çš„ã«è“„ç©ãƒ»æ´»ç”¨ã™ã‚‹ãŸã‚ã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã¨ã—ã¦è¨­è¨ˆã•ã‚Œã¦ã„ã‚‹ã€‚

### 1.2 è§£æ±ºã™ã‚‹èª²é¡Œ

- Medium ã®è‹±èªžè¨˜äº‹ã‚’èª­ã‚€ã‚³ã‚¹ãƒˆãŒé«˜ã„
- èª­ã‚“ã è¨˜äº‹ã®ãƒŠãƒ¬ãƒƒã‚¸ãŒæ•£é€¸ã—ã¦å†åˆ©ç”¨ã§ããªã„
- è¨˜äº‹åŒå£«ã®é–¢é€£æ€§ãŒè¦‹ãˆãšã€ä½“ç³»çš„ãªå­¦ã³ã«ã¤ãªãŒã‚‰ãªã„

### 1.3 å¯¾è±¡ãƒ¦ãƒ¼ã‚¶ãƒ¼

Engineering Managerï¼ˆEMï¼‰ã€‚Web3 ã«é™ã‚‰ãšã€æŠ€è¡“è¨˜äº‹å…¨èˆ¬ã‚’å¯¾è±¡ã¨ã™ã‚‹ã€‚
EM ã¨ã—ã¦ã®ãƒŠãƒ¬ãƒƒã‚¸è“„ç©ãŒä¸»ç›®çš„ã§ã‚ã‚Šã€ç‰¹å®šãƒ—ãƒ­ãƒ€ã‚¯ãƒˆï¼ˆTOKI ç­‰ï¼‰ã«ä¾å­˜ã—ãªã„æ±Žç”¨ãƒ„ãƒ¼ãƒ«ã€‚

---

## 2. ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### 2.1 å…¨ä½“æ§‹æˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Medium  â”‚â”€â”€â”€â”€â–¶â”‚  browser  â”‚â”€â”€â”€â”€â–¶â”‚ translator â”‚â”€â”€â”€â”€â–¶â”‚  Notion  â”‚
â”‚ (è¨˜äº‹)   â”‚     â”‚(Playwright)â”‚     â”‚(Claude CLI)â”‚     â”‚  (API)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚                  â”‚                  â”‚
                       â–¼                  â–¼                  â–¼
                 medium-session     article-index       Notion DB
                    .json              .json            (ãƒšãƒ¼ã‚¸)
```

### 2.2 ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®æµã‚Œ

```
1. è¨­å®šèª­ã¿è¾¼ã¿ (.env)
2. Claude Code CLI ã®å­˜åœ¨ç¢ºèª
3. Notion DB ã¸ã®æŽ¥ç¶šç¢ºèª
4. Playwright ã§ Medium è¨˜äº‹ã‚’å–å¾—ï¼ˆã‚»ãƒƒã‚·ãƒ§ãƒ³å¿…é ˆï¼‰
5. æ—¢å­˜è¨˜äº‹ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹èª­ã¿è¾¼ã¿ (article-index.json)
6. Claude Code CLI ã§ç¿»è¨³ï¼ˆ2ã‚¹ãƒ†ãƒƒãƒ—ï¼‰
   Step 1: æœ¬æ–‡ã®æ—¥æœ¬èªžç¿»è¨³ï¼ˆãƒžãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³å‡ºåŠ›ï¼‰
   Step 2: ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿æŠ½å‡ºï¼ˆJSON å‡ºåŠ›ï¼‰
           - æ—¥æœ¬èªžã‚¿ã‚¤ãƒˆãƒ«
           - ã‚«ãƒ†ã‚´ãƒªåˆ†é¡ž
           - æ§‹é€ åŒ–è¦ç´„ï¼ˆ4è¦³ç‚¹ï¼‰
7. Notion DB ã«ãƒšãƒ¼ã‚¸ä½œæˆ
8. ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã«æ–°è¨˜äº‹ã‚’è¿½åŠ ãƒ»ä¿å­˜
9. çµæžœè¡¨ç¤º
```

### 2.3 ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```
medium-notion-translator/
â”œâ”€â”€ pyproject.toml              # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå®šç¾©ãƒ»ä¾å­˜é–¢ä¿‚
â”œâ”€â”€ .env                        # ç’°å¢ƒå¤‰æ•°ï¼ˆAPI ã‚­ãƒ¼ç­‰ï¼‰
â”œâ”€â”€ .env.example                # .env ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
â”œâ”€â”€ .gitignore
â”œâ”€â”€ medium-session.json         # Playwright ã‚»ãƒƒã‚·ãƒ§ãƒ³ï¼ˆè‡ªå‹•ç”Ÿæˆï¼‰
â”œâ”€â”€ article-index.json          # æ—¢å­˜è¨˜äº‹ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼ˆè‡ªå‹•ç”Ÿæˆï¼‰
â”œâ”€â”€ src/
â”‚   â””â”€â”€ medium_notion/
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ cli.py              # CLI ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆï¼ˆClickï¼‰
â”‚       â”œâ”€â”€ browser.py          # Medium è¨˜äº‹å–å¾—ï¼ˆPlaywrightï¼‰
â”‚       â”œâ”€â”€ translator.py       # ç¿»è¨³ã‚¨ãƒ³ã‚¸ãƒ³ï¼ˆClaude Code CLIï¼‰
â”‚       â”œâ”€â”€ notion_client.py    # Notion ãƒšãƒ¼ã‚¸ä½œæˆï¼ˆNotion APIï¼‰
â”‚       â”œâ”€â”€ config.py           # è¨­å®šç®¡ç†ï¼ˆPydantic + dotenvï¼‰
â”‚       â”œâ”€â”€ models.py           # ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«å®šç¾©
â”‚       â””â”€â”€ logger.py           # ãƒ­ã‚¬ãƒ¼ï¼ˆloguruï¼‰
â””â”€â”€ tests/
```

---

## 3. ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«è©³ç´°

### 3.1 cli.py â€” CLI ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆ

**ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: Click

**ã‚³ãƒžãƒ³ãƒ‰ä¸€è¦§**:

| ã‚³ãƒžãƒ³ãƒ‰ | èª¬æ˜Ž | ä¸»ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³ |
|---------|------|--------------|
| `translate` | è¨˜äº‹ã‚’ç¿»è¨³ã—ã¦ Notion ã«è¿½åŠ  | `-u URL`ï¼ˆå¿…é ˆï¼‰, `-s SCORE`ï¼ˆ1-10ï¼‰, `--headless/--gui` |
| `batch` | URL ãƒªã‚¹ãƒˆã‹ã‚‰ä¸€æ‹¬ç¿»è¨³ | `-f FILE`ï¼ˆå¿…é ˆï¼‰, `-s SCORE`, `-i INTERVAL`ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ30ç§’ï¼‰, `--headless/--gui` |
| `login` | Medium ã«ãƒ–ãƒ©ã‚¦ã‚¶ã§ãƒ­ã‚°ã‚¤ãƒ³ | ãªã—ï¼ˆå¸¸ã« GUI ãƒ¢ãƒ¼ãƒ‰ï¼‰ |
| `index` | Notion DB ã‹ã‚‰è¨˜äº‹ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’æ§‹ç¯‰ | ãªã— |
| `setup` | å¯¾è©±åž‹ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¦ã‚£ã‚¶ãƒ¼ãƒ‰ | ãªã— |
| `test` | è¨­å®šã¨æŽ¥ç¶šã®çŠ¶æ…‹ãƒã‚§ãƒƒã‚¯ | ãªã— |

**è¨­è¨ˆæ–¹é‡**:
- å…¨ã‚³ãƒžãƒ³ãƒ‰ã§ `-h` / `--help` ã‚’ä½¿ç”¨å¯èƒ½ï¼ˆ`CONTEXT_SETTINGS`ï¼‰
- `medium-notion -h` ã§ãƒ—ãƒ­ã‚°ãƒ©ãƒ å…¨ä½“ã®ä½¿ã„æ–¹ã‚’è¡¨ç¤º
- ã‚¨ãƒ©ãƒ¼ã¯ `RuntimeError` ã‚’ catch ã—ã¦ `rich` ã§æ•´å½¢è¡¨ç¤ºï¼ˆã‚¹ã‚¿ãƒƒã‚¯ãƒˆãƒ¬ãƒ¼ã‚¹ã‚’å‡ºã•ãªã„ï¼‰
- çµæžœã¯ `rich` ã® Panel / Table ã§è¦‹ã‚„ã™ãè¡¨ç¤º

**translate ã‚³ãƒžãƒ³ãƒ‰ã®å‡¦ç†ãƒ•ãƒ­ãƒ¼**:
1. è¨­å®šèª­ã¿è¾¼ã¿ â†’ 2. Claude CLI ç¢ºèª â†’ 3. Notion æŽ¥ç¶šç¢ºèª â†’ 4. è¨˜äº‹å–å¾— â†’ 5. ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹èª­ã¿è¾¼ã¿ â†’ 6. ç¿»è¨³ â†’ 7. Notion ç™»éŒ² â†’ 8. ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æ›´æ–° â†’ 9. çµæžœè¡¨ç¤º

**batch ã‚³ãƒžãƒ³ãƒ‰ã®å‡¦ç†ãƒ•ãƒ­ãƒ¼**:
1. URL ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿ãƒ»ãƒ‘ãƒ¼ã‚¹ï¼ˆ`#` ã‚³ãƒ¡ãƒ³ãƒˆãƒ»ç©ºè¡Œã‚’é™¤å¤–ï¼‰
2. è¨­å®šèª­ã¿è¾¼ã¿ï¼ˆ1å›žï¼‰ â†’ 3. Claude CLI ç¢ºèªï¼ˆ1å›žï¼‰ â†’ 4. Notion æŽ¥ç¶šç¢ºèªï¼ˆ1å›žï¼‰
5. æ—¢å­˜ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹èª­ã¿è¾¼ã¿ï¼ˆ1å›žï¼‰â†’ å‡¦ç†æ¸ˆã¿ URL ã‚’ set åŒ–
6. ãƒ–ãƒ©ã‚¦ã‚¶åˆæœŸåŒ–ï¼ˆ1å›ž â€” å…¨è¨˜äº‹ã§å…±æœ‰ï¼‰
7. è¨˜äº‹ã”ã¨ã®ãƒ«ãƒ¼ãƒ—:
   - å‡¦ç†æ¸ˆã¿ãƒã‚§ãƒƒã‚¯ â†’ ã‚¹ã‚­ãƒƒãƒ— or å–å¾— â†’ ç¿»è¨³ â†’ Notion ç™»éŒ² â†’ ãƒ¡ãƒ¢ãƒªä¸Šã§ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹è¿½åŠ 
   - ã‚¨ãƒ©ãƒ¼æ™‚ã¯ãƒ­ã‚°ã«è¨˜éŒ²ã—ã¦ã‚¹ã‚­ãƒƒãƒ—ã€æ¬¡ã®è¨˜äº‹ã¸
   - æœ€å¾Œã®è¨˜äº‹ä»¥å¤–ã¯ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒ«å¾…æ©Ÿï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ30ç§’ï¼‰
8. ãƒ–ãƒ©ã‚¦ã‚¶çµ‚äº† â†’ ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ä¸€æ‹¬ä¿å­˜ â†’ ãƒãƒƒãƒçµæžœã‚µãƒžãƒªãƒ¼è¡¨ç¤º

**ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ç®¡ç†**:
- `_load_article_index()`: `article-index.json` ã‹ã‚‰æ—¢å­˜è¨˜äº‹ä¸€è¦§ã‚’èª­ã¿è¾¼ã‚€
- `_append_to_index()`: ç¿»è¨³å®Œäº†å¾Œã«æ–°è¨˜äº‹ã‚’è¿½åŠ ï¼ˆURL ãƒ™ãƒ¼ã‚¹ã§é‡è¤‡ãƒã‚§ãƒƒã‚¯ï¼‰
- `index` ã‚³ãƒžãƒ³ãƒ‰: Notion DB ã‹ã‚‰å…¨è¨˜äº‹ã‚’å–å¾—ã—ã¦ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’å†æ§‹ç¯‰

### 3.2 browser.py â€” Medium è¨˜äº‹å–å¾—

**æŠ€è¡“**: Playwrightï¼ˆChromiumã€éžåŒæœŸ APIï¼‰

**ã‚¯ãƒ©ã‚¹**: `BrowserClient`

**ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†**:
- ãƒ­ã‚°ã‚¤ãƒ³ã‚»ãƒƒã‚·ãƒ§ãƒ³ã¯ `medium-session.json` ã«ä¿å­˜
- `login` ã‚³ãƒžãƒ³ãƒ‰ã§ GUI ãƒ–ãƒ©ã‚¦ã‚¶ã‚’é–‹ã„ã¦æ‰‹å‹•ãƒ­ã‚°ã‚¤ãƒ³ â†’ ã‚»ãƒƒã‚·ãƒ§ãƒ³ä¿å­˜
- `translate` ã‚³ãƒžãƒ³ãƒ‰å®Ÿè¡Œæ™‚ã¯ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã®å­˜åœ¨ãŒå¿…é ˆ
- ã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒãªã„å ´åˆã¯ `RuntimeError` ã§å³åº§ã«ã‚¨ãƒ©ãƒ¼çµ‚äº†

**è¨˜äº‹å–å¾—ãƒ•ãƒ­ãƒ¼** (`fetch_article`):
1. ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«å­˜åœ¨ãƒã‚§ãƒƒã‚¯ â†’ ãªã‘ã‚Œã°å³ `RuntimeError`
2. è¨˜äº‹ãƒšãƒ¼ã‚¸ã«ã‚¢ã‚¯ã‚»ã‚¹ï¼ˆ`domcontentloaded` ã§å¾…æ©Ÿï¼‰
3. HTTP ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ãƒã‚§ãƒƒã‚¯ï¼ˆ>= 400 ã§ã‚¨ãƒ©ãƒ¼ï¼‰
4. JavaScript ã§ 404 / ç„¡åŠ¹ãƒšãƒ¼ã‚¸æ¤œå‡º
5. è¨˜äº‹ã‚³ãƒ³ãƒ†ãƒŠã®æ¤œå‡ºï¼ˆ`ARTICLE_CONTAINER_SELECTORS` ã‚’é †ã«è©¦è¡Œï¼‰
6. ãƒšãƒ¼ã‚¸ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ï¼ˆé…å»¶ãƒ­ãƒ¼ãƒ‰ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ãƒˆãƒªã‚¬ãƒ¼ï¼‰
7. ã‚¿ã‚¤ãƒˆãƒ«ãƒ»è‘—è€…ãƒ»æœ¬æ–‡ã‚’æŠ½å‡º

**ã‚³ãƒ³ãƒ†ãƒ³ãƒ„æŠ½å‡º** (`_extract_content`):
- JavaScript ã® DOM ãƒ„ãƒªãƒ¼ã‚¦ã‚©ãƒ¼ã‚«ãƒ¼ã§å†å¸°çš„ã«èµ°æŸ»
- ãƒžãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³å½¢å¼ã«å¤‰æ›ã—ãªãŒã‚‰æŠ½å‡º
- å¯¾å¿œè¦ç´ : è¦‹å‡ºã—ï¼ˆh1-h4ï¼‰ã€æ®µè½ï¼ˆã‚¤ãƒ³ãƒ©ã‚¤ãƒ³æ›¸å¼å«ã‚€ï¼‰ã€ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã€å¼•ç”¨ã€ãƒªã‚¹ãƒˆã€ç”»åƒã‚­ãƒ£ãƒ—ã‚·ãƒ§ãƒ³
- ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³æ›¸å¼: `**å¤ªå­—**`ã€`*æ–œä½“*`ã€`` `ã‚³ãƒ¼ãƒ‰` ``ã€`[ãƒªãƒ³ã‚¯](URL)`
- ã‚¹ã‚­ãƒƒãƒ—: nav, footer, header, button, aside, script, style ç­‰ã®éžã‚³ãƒ³ãƒ†ãƒ³ãƒ„è¦ç´ 
- ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯: ã‚³ãƒ³ãƒ†ãƒŠãŒè¦‹ã¤ã‹ã‚‰ãªã„å ´åˆã¯ `TreeWalker` ã§ body å…¨ä½“ã‹ã‚‰ãƒ†ã‚­ã‚¹ãƒˆæŠ½å‡º

**ã‚³ãƒ³ãƒ†ãƒŠã‚»ãƒ¬ã‚¯ã‚¿**ï¼ˆå„ªå…ˆåº¦é †ï¼‰:
```python
["article", "[data-testid='story-content']", ".postArticle-content", "main", "[role='main']"]
```

**ãƒœãƒƒãƒˆæ¤œå‡ºå›žé¿**:
- `navigator.webdriver` ã‚’ `undefined` ã«ä¸Šæ›¸ã
- ã‚«ã‚¹ã‚¿ãƒ  User-Agent è¨­å®š
- Chromium èµ·å‹•æ™‚ã« `--disable-blink-features=AutomationControlled`

**404 æ¤œå‡ºãƒ­ã‚¸ãƒƒã‚¯**:
- `document.title === 'Medium'`
- `bodyText` ã« "page not found", "404", "this page doesn't" ç­‰ã‚’å«ã‚€
- ãŸã ã—è¨˜äº‹æ§‹é€ ï¼ˆ`article`, `h1` ç­‰ï¼‰ãŒã‚ã‚‹å ´åˆã¯é™¤å¤–

### 3.3 translator.py â€” ç¿»è¨³ã‚¨ãƒ³ã‚¸ãƒ³

**æŠ€è¡“**: Claude Code CLIï¼ˆ`claude -p --output-format text`ï¼‰ã‚’ã‚µãƒ–ãƒ—ãƒ­ã‚»ã‚¹ã¨ã—ã¦å‘¼ã³å‡ºã—

**ã‚¯ãƒ©ã‚¹**: `TranslationService`

**2ã‚¹ãƒ†ãƒƒãƒ—æ–¹å¼**:

| ã‚¹ãƒ†ãƒƒãƒ— | ç›®çš„ | å…¥åŠ› | å‡ºåŠ›å½¢å¼ |
|---------|------|------|---------|
| Step 1 | æœ¬æ–‡ç¿»è¨³ | è¨˜äº‹å…¨æ–‡ | ãƒ—ãƒ¬ãƒ¼ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼ˆãƒžãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ï¼‰ |
| Step 2 | ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿æŠ½å‡º | è¨˜äº‹å…ˆé ­ 3000 æ–‡å­— + æ—¢å­˜è¨˜äº‹ä¸€è¦§ | JSON |

**Step 1: ç¿»è¨³ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ** (`TRANSLATE_PROMPT`):
- ãƒ­ãƒ¼ãƒ«: æŠ€è¡“è¨˜äº‹ã®ç¿»è¨³è€…
- ãƒ«ãƒ¼ãƒ«: è‡ªç„¶ãªæ—¥æœ¬èªžã€æŠ€è¡“ç”¨èªžã¯è‹±èªž/ã‚«ã‚¿ã‚«ãƒŠç¶­æŒã€ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ç¶­æŒã€ãƒžãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³å½¢å¼
- é•·ã„è¨˜äº‹ï¼ˆ> 15,000 æ–‡å­—ï¼‰ã¯ãƒãƒ£ãƒ³ã‚¯åˆ†å‰²ã—ã¦ç¿»è¨³

**Step 2: ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ** (`METADATA_PROMPT`):
- ãƒ­ãƒ¼ãƒ«: Engineering Manager å‘ã‘ã®ãƒŠãƒ¬ãƒƒã‚¸ã‚­ãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼
- å‡ºåŠ› JSON æ§‹é€ :
  ```json
  {
    "japanese_title": "æ—¥æœ¬èªžã‚¿ã‚¤ãƒˆãƒ«",
    "categories": ["ã‚«ãƒ†ã‚´ãƒª1", "ã‚«ãƒ†ã‚´ãƒª2"],
    "summary": {
      "overview": "è¨˜äº‹å…¨ä½“ã®è¦æ—¨ï¼ˆ2ã€œ3æ–‡ï¼‰",
      "learnings": "å­¦ã¹ã‚‹æ–°ã—ã„çŸ¥è¦‹ï¼ˆ2ã€œ3ç‚¹ï¼‰",
      "use_cases": "EMãƒ»ãƒãƒ¼ãƒ ã§ã®å®Ÿå‹™æ´»ç”¨æ–¹æ³•ï¼ˆ2ã€œ3ç‚¹ï¼‰",
      "connections": "éŽåŽ»è¨˜äº‹ã¨ã®é–¢é€£æ€§ãƒ»çµ„ã¿åˆã‚ã›ã‚¢ã‚¤ãƒ‡ã‚¢"
    }
  }
  ```

**æ§‹é€ åŒ–è¦ç´„ã®4è¦³ç‚¹**:

| è¦³ç‚¹ | çµµæ–‡å­— | å†…å®¹ |
|------|-------|------|
| æ¦‚è¦ | ðŸ“– | ä½•ã«ã¤ã„ã¦ã®è¨˜äº‹ã§ã€çµè«–ã¯ä½•ã‹ |
| å­¦ã³ãƒ»æ–°è¦æ€§ | ðŸ’¡ | EM ã¨ã—ã¦çŸ¥ã‚‹ã¹ãæ–°ã—ã„çŸ¥è¦‹ï¼ˆæ—¢çŸ¥ã®ä¸€èˆ¬è«–ã¯é™¤å¤–ï¼‰ |
| æ´»ç”¨æ–¹æ³• | ðŸ›  | ãƒãƒ¼ãƒ å±•é–‹ã€1on1ã€æ„æ€æ±ºå®šã§ã®æ´»ç”¨æ³• |
| ä»–ã®è¨˜äº‹ã¨ã®é–¢é€£ | ðŸ”— | æ—¢å­˜è¨˜äº‹ã¨çµ„ã¿åˆã‚ã›ãŸä¾¡å€¤å‰µå‡ºã®ææ¡ˆ |

**ã‚«ãƒ†ã‚´ãƒªé¸æŠžè‚¢**:
```
Web3, DeFi, Blockchain, Cross-chain, Bridge, Smart Contract,
Layer2, NFT, DAO, Security, Development, AI, ML, LLM,
DevOps, DevTools, Programming, Cloud, Infrastructure,
Frontend, Backend, Mobile, Data, Design, Career, Other
```

**ã‚¿ã‚¤ãƒˆãƒ«å½¢å¼**: `æ—¥æœ¬èªžã‚¿ã‚¤ãƒˆãƒ« | English Title`ï¼ˆæ—¥è‹±ä½µè¨˜ï¼‰

**JSON ãƒ‘ãƒ¼ã‚¹**:
- ```` ```json ``` ```` ãƒ–ãƒ­ãƒƒã‚¯ã‹ã‚‰ã®æŠ½å‡ºã‚’å„ªå…ˆ
- ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯: ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ã® `{ }` ã‚’æ·±ã•ã‚«ã‚¦ãƒ³ãƒˆã§æŽ¢ç´¢
- ãƒ‘ãƒ¼ã‚¹å¤±æ•—æ™‚ã‚‚ç¿»è¨³çµæžœï¼ˆStep 1ï¼‰ã¯ä¿æŒ

**Claude CLI å‘¼ã³å‡ºã—**:
- ã‚³ãƒžãƒ³ãƒ‰: `claude -p --output-format text`
- ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã¯ `stdin` çµŒç”±ã§æ¸¡ã™
- ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ: 600 ç§’ï¼ˆ10 åˆ†ï¼‰

### 3.4 notion_client.py â€” Notion ãƒšãƒ¼ã‚¸ä½œæˆ

**æŠ€è¡“**: notion-clientï¼ˆå…¬å¼ Python SDKï¼‰

**ã‚¯ãƒ©ã‚¹**: `NotionClient`

**Notion DB ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£**:

| ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£å | åž‹ | å†…å®¹ |
|------------|------|------|
| `åå‰` | title | æ—¥è‹±ä½µè¨˜ã‚¿ã‚¤ãƒˆãƒ« |
| `URL` | url | å…ƒè¨˜äº‹ã® URL |
| `read date` | date | ç¿»è¨³å®Ÿè¡Œæ—¥ |
| `Categories` | multi_select | è‡ªå‹•åˆ†é¡žã‚«ãƒ†ã‚´ãƒª |
| `Score` | number | ãƒ¦ãƒ¼ã‚¶ãƒ¼æŒ‡å®šã‚¹ã‚³ã‚¢ï¼ˆ1-10ã€ä»»æ„ï¼‰ |

**ãƒšãƒ¼ã‚¸æœ¬æ–‡ã®æ§‹é€ **:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ðŸ“‘ ç›®æ¬¡ï¼ˆtable_of_contentsï¼‰         â”‚  â† å…ˆé ­
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”€â”€ åŒºåˆ‡ã‚Šç·š â”€â”€                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ## è¦ç´„                              â”‚
â”‚   ### ðŸ“– æ¦‚è¦                        â”‚
â”‚   â”Œ callout (ðŸ“–) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚ è¨˜äº‹ã®è¦æ—¨...               â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚   ### ðŸ’¡ å­¦ã³ãƒ»æ–°è¦æ€§                 â”‚
â”‚   â”Œ callout (ðŸ’¡) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚ æ–°ã—ã„çŸ¥è¦‹...               â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚   ### ðŸ›  æ´»ç”¨æ–¹æ³•                     â”‚
â”‚   â”Œ callout (ðŸ› ) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚ æ´»ç”¨ã®ææ¡ˆ...               â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚   ### ðŸ”— ä»–ã®è¨˜äº‹ã¨ã®é–¢é€£              â”‚
â”‚   â”Œ callout (ðŸ”—) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚ é–¢é€£è¨˜äº‹ã®ææ¡ˆ...            â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”€â”€ åŒºåˆ‡ã‚Šç·š â”€â”€                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ## ç¿»è¨³                              â”‚
â”‚ ï¼ˆç¿»è¨³æœ¬æ–‡ï¼šè¦‹å‡ºã—ãƒ»æ®µè½ãƒ»ã‚³ãƒ¼ãƒ‰ãƒ»     â”‚
â”‚   ãƒªã‚¹ãƒˆãƒ»å¼•ç”¨ãƒ»ç”»åƒã‚­ãƒ£ãƒ—ã‚·ãƒ§ãƒ³ç­‰ï¼‰    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”€â”€ åŒºåˆ‡ã‚Šç·š â”€â”€                       â”‚
â”‚ ðŸ”– å…ƒè¨˜äº‹ bookmark                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å¯¾å¿œã™ã‚‹ Notion ãƒ–ãƒ­ãƒƒã‚¯ã‚¿ã‚¤ãƒ—**:

| ãƒžãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³è¦ç´  | Notion ãƒ–ãƒ­ãƒƒã‚¯ | å‚™è€ƒ |
|----------------|---------------|------|
| `# è¦‹å‡ºã—` | `heading_1` / `heading_2` / `heading_3` | ç›®æ¬¡ã«è‡ªå‹•åæ˜  |
| é€šå¸¸æ®µè½ | `paragraph`ï¼ˆ`rich_text` + ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³æ›¸å¼ï¼‰ | |
| `` ``` ã‚³ãƒ¼ãƒ‰ ``` `` | `code` | è¨€èªžæŒ‡å®šå¯¾å¿œ |
| `> å¼•ç”¨` | `quote` | |
| `- ç®‡æ¡æ›¸ã` | `bulleted_list_item` | |
| `1. ç•ªå·ãƒªã‚¹ãƒˆ` | `numbered_list_item` | |
| `[ç”»åƒ: ...]` | `paragraph`ï¼ˆitalicï¼‰ | |
| åŒºåˆ‡ã‚Š | `divider` | |
| å…ƒè¨˜äº‹ãƒªãƒ³ã‚¯ | `bookmark` | |
| ç›®æ¬¡ | `table_of_contents` | ãƒšãƒ¼ã‚¸å…ˆé ­ |
| è¦ç´„ã‚»ã‚¯ã‚·ãƒ§ãƒ³ | `callout`ï¼ˆçµµæ–‡å­—ã‚¢ã‚¤ã‚³ãƒ³ä»˜ãï¼‰ | |

**ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³æ›¸å¼ãƒ‘ãƒ¼ã‚µãƒ¼** (`_parse_inline_markdown`):
- æ­£è¦è¡¨ç¾ã§ `**å¤ªå­—**`ã€`*æ–œä½“*`ã€`` `ã‚³ãƒ¼ãƒ‰` ``ã€`[ãƒ†ã‚­ã‚¹ãƒˆ](URL)` ã‚’æ¤œå‡º
- Notion `rich_text` ã® `annotations`ï¼ˆbold, italic, codeï¼‰ã¨ `link` ã«å¤‰æ›
- ãƒ—ãƒ¬ãƒ¼ãƒ³ãƒ†ã‚­ã‚¹ãƒˆéƒ¨åˆ†ã‚‚ãã®ã¾ã¾ `rich_text` ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦å‡ºåŠ›

**API åˆ¶é™ã¸ã®å¯¾å¿œ**:
- ãƒ†ã‚­ã‚¹ãƒˆãƒ–ãƒ­ãƒƒã‚¯æœ€å¤§ 2000 æ–‡å­—ï¼ˆ`MAX_BLOCK_TEXT_LENGTH`ï¼‰
- è¶…éŽæ™‚ã¯å¥ç‚¹ï¼ˆã€‚ï¼‰ã¾ãŸã¯ãƒ”ãƒªã‚ªãƒ‰ï¼ˆ. ï¼‰ã§åˆ†å‰²

**æ—¢å­˜è¨˜äº‹ä¸€è¦§å–å¾—** (`list_articles`):
- Notion DB ã‚’ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆ100ä»¶ãšã¤ï¼‰ã§å…¨ä»¶å–å¾—
- `read date` ã®é™é †ã§ã‚½ãƒ¼ãƒˆ
- ã‚¿ã‚¤ãƒˆãƒ«ã¨ã‚«ãƒ†ã‚´ãƒªã‚’è¿”ã™

### 3.5 config.py â€” è¨­å®šç®¡ç†

**æŠ€è¡“**: Pydantic BaseModel + python-dotenv

**ç’°å¢ƒå¤‰æ•°**:

| å¤‰æ•°å | å¿…é ˆ | èª¬æ˜Ž | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ |
|--------|-----|------|-----------|
| `NOTION_API_KEY` | â—‹ | Notion Integration ã® API ã‚­ãƒ¼ | - |
| `NOTION_DATABASE_ID` | â—‹ | Notion ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã® ID | - |
| `HEADLESS` | Ã— | ãƒ–ãƒ©ã‚¦ã‚¶ã‚’éžè¡¨ç¤ºã§å®Ÿè¡Œ | `false` |
| `LOG_LEVEL` | Ã— | ãƒ­ã‚°ãƒ¬ãƒ™ãƒ« | `INFO` |
| `CLAUDE_MODEL` | Ã— | Claude ã®ãƒ¢ãƒ‡ãƒ«å | `sonnet` |

**è‡ªå‹•ç”Ÿæˆãƒ•ã‚¡ã‚¤ãƒ«**:
- `session_path`: `medium-session.json`ï¼ˆPlaywright ã‚»ãƒƒã‚·ãƒ§ãƒ³ï¼‰
- `index_path`: `article-index.json`ï¼ˆè¨˜äº‹ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼‰

**ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³**:
- `NOTION_API_KEY`: ç©ºæ–‡å­—ãƒ»ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ï¼ˆ`ntn_your`ï¼‰ã‚’æ‹’å¦
- `NOTION_DATABASE_ID`: ç©ºæ–‡å­—ãƒ»ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ï¼ˆ`your_`ï¼‰ã‚’æ‹’å¦ã€ãƒã‚¤ãƒ•ãƒ³è‡ªå‹•é™¤åŽ»
- Database ID ã¯ API å‘¼ã³å‡ºã—æ™‚ã«ãƒã‚¤ãƒ•ãƒ³ä»˜ã UUID å½¢å¼ã«è‡ªå‹•å¤‰æ›

### 3.6 models.py â€” ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

**MediumArticle**ï¼ˆå–å¾—ã—ãŸè¨˜äº‹ï¼‰:
```
url, title, content, author, publish_date, tags, is_preview_only
+ word_count (property), char_count (property)
```

**TranslationResult**ï¼ˆç¿»è¨³çµæžœï¼‰:
```
original (MediumArticle), japanese_title, japanese_content,
categories, summary
+ notion_title (property)
```

**NotionPage**ï¼ˆä½œæˆã•ã‚ŒãŸãƒšãƒ¼ã‚¸ï¼‰:
```
page_id, title, url, created_at
```

### 3.7 logger.py â€” ãƒ­ã‚¬ãƒ¼

**æŠ€è¡“**: loguru

**ãƒ­ã‚°é–¢æ•°**:
- `step(message)`: å‡¦ç†ã‚¹ãƒ†ãƒƒãƒ—ï¼ˆâ–¶ ãƒžãƒ¼ã‚¯ï¼‰
- `success(message)`: æˆåŠŸï¼ˆâœ“ ãƒžãƒ¼ã‚¯ï¼‰
- `warn(message)`: è­¦å‘Šï¼ˆâš  ãƒžãƒ¼ã‚¯ï¼‰
- `error(message)`: ã‚¨ãƒ©ãƒ¼ï¼ˆâœ— ãƒžãƒ¼ã‚¯ï¼‰

---

## 4. å¤–éƒ¨ä¾å­˜é–¢ä¿‚

### 4.1 Python ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸

| ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | ç”¨é€” |
|-----------|-----------|------|
| click | >= 8.0 | CLI ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ |
| python-dotenv | >= 1.0 | .env ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿ |
| playwright | >= 1.40 | ãƒ–ãƒ©ã‚¦ã‚¶è‡ªå‹•åŒ– |
| notion-client | >= 2.0 | Notion API SDK |
| pydantic | >= 2.0 | è¨­å®šãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ |
| loguru | >= 0.7 | ãƒ­ã‚®ãƒ³ã‚° |
| rich | >= 13.0 | CLI å‡ºåŠ›ã®è£…é£¾ |

### 4.2 å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹

| ã‚µãƒ¼ãƒ“ã‚¹ | ç”¨é€” | èªè¨¼æ–¹æ³• |
|---------|------|---------|
| Medium | è¨˜äº‹å–å¾—å…ƒ | Playwright ã‚»ãƒƒã‚·ãƒ§ãƒ³ï¼ˆæ‰‹å‹•ãƒ­ã‚°ã‚¤ãƒ³ï¼‰ |
| Claude Code CLI | ç¿»è¨³ã‚¨ãƒ³ã‚¸ãƒ³ | Max ãƒ—ãƒ©ãƒ³ï¼ˆ`claude login`ï¼‰ |
| Notion API | è¨˜äº‹ä¿å­˜å…ˆ | Integration API ã‚­ãƒ¼ |

### 4.3 ã‚·ã‚¹ãƒ†ãƒ è¦ä»¶

- Python >= 3.10
- Node.jsï¼ˆClaude Code CLI ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã«å¿…è¦ï¼‰
- Chromiumï¼ˆPlaywright ãŒè‡ªå‹•ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼‰

---

## 5. ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

### 5.1 article-index.json ã®æ§‹é€ 

`translate` ã‚³ãƒžãƒ³ãƒ‰ã¨ `index` ã‚³ãƒžãƒ³ãƒ‰ã§ã¯ä¿å­˜ã™ã‚‹æ§‹é€ ãŒç•°ãªã‚‹ã€‚

**translate ã‚³ãƒžãƒ³ãƒ‰å®Ÿè¡Œæ™‚**ï¼ˆurl ã‚’å«ã‚€ï¼‰:
```json
[
  {
    "title": "æ—¥æœ¬èªžã‚¿ã‚¤ãƒˆãƒ« | English Title",
    "categories": ["AI", "LLM"],
    "url": "https://medium.com/..."
  }
]
```

**index ã‚³ãƒžãƒ³ãƒ‰å®Ÿè¡Œæ™‚**ï¼ˆNotion DB ã‹ã‚‰å†æ§‹ç¯‰ã€url ã‚’å«ã¾ãªã„ï¼‰:
```json
[
  {
    "title": "æ—¥æœ¬èªžã‚¿ã‚¤ãƒˆãƒ« | English Title",
    "categories": ["AI", "LLM"]
  }
]
```

**ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«**:
- `medium-notion index`: Notion DB ã‹ã‚‰å…¨ä»¶å–å¾—ã—ã¦å†æ§‹ç¯‰ï¼ˆã‚¿ã‚¤ãƒˆãƒ«ã¨ã‚«ãƒ†ã‚´ãƒªã®ã¿ï¼‰
- `medium-notion translate`: ç¿»è¨³å®Œäº†å¾Œã«è‡ªå‹•è¿½åŠ ï¼ˆurl è¾¼ã¿ã€URL ãƒ™ãƒ¼ã‚¹ã§é‡è¤‡ãƒã‚§ãƒƒã‚¯ï¼‰
- ç¿»è¨³æ™‚ã« Step 2 ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«æ¸¡ã•ã‚Œã€Œä»–ã®è¨˜äº‹ã¨ã®é–¢é€£ã€åˆ†æžã«ä½¿ç”¨
- æœ€å¤§ 50 ä»¶ãŒãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«å«ã¾ã‚Œã‚‹

### 5.2 medium-session.json

Playwright ã® `storage_state` ã‚’ãã®ã¾ã¾ JSON ä¿å­˜ã€‚
Cookie ã‚„ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã®æƒ…å ±ã‚’å«ã‚€ã€‚

---

## 6. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°æ–¹é‡

### 6.1 æ—©æœŸãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆç¿»è¨³å‰ã«æ¤œå‡ºï¼‰

| ãƒã‚§ãƒƒã‚¯ | ã‚¿ã‚¤ãƒŸãƒ³ã‚° | ã‚¨ãƒ©ãƒ¼ |
|---------|----------|--------|
| ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«æœªå­˜åœ¨ | è¨˜äº‹å–å¾—å‰ | `RuntimeError` |
| HTTP ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ >= 400 | ãƒšãƒ¼ã‚¸ã‚¢ã‚¯ã‚»ã‚¹ç›´å¾Œ | `RuntimeError` |
| 404 / ç„¡åŠ¹ãƒšãƒ¼ã‚¸æ¤œå‡º | DOM èª­ã¿è¾¼ã¿å¾Œ | `RuntimeError` |
| ã‚³ãƒ³ãƒ†ãƒ³ãƒ„æŠ½å‡ºå¤±æ•— | DOM èµ°æŸ»å¾Œ | `RuntimeError`ï¼ˆãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å¾Œï¼‰ |

### 6.2 è¨­è¨ˆåŽŸå‰‡

- **ç„¡åŠ¹ãªãƒšãƒ¼ã‚¸ã§ Claude ã‚’å‘¼ã°ãªã„**: HTTP ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã¨ DOM ãƒã‚§ãƒƒã‚¯ã§äº‹å‰ã«æ¤œå‡º
- **ã‚¹ã‚¿ãƒƒã‚¯ãƒˆãƒ¬ãƒ¼ã‚¹ã‚’è¦‹ã›ãªã„**: `RuntimeError` ã‚’ CLI å±¤ã§ catch ã—ã¦æ•´å½¢è¡¨ç¤º
- **ç¿»è¨³çµæžœã¯æ¨ã¦ãªã„**: Step 2ï¼ˆãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ï¼‰ãŒå¤±æ•—ã—ã¦ã‚‚ Step 1ï¼ˆç¿»è¨³æœ¬æ–‡ï¼‰ã¯ä¿æŒ
- **ã‚»ãƒƒã‚·ãƒ§ãƒ³æœŸé™åˆ‡ã‚Œã¯æ˜Žç¤ºçš„ã«ä¼ãˆã‚‹**: `login` ã‚³ãƒžãƒ³ãƒ‰ã®å†å®Ÿè¡Œã‚’ä¿ƒã™

---

## 7. è¨­è¨ˆä¸Šã®åˆ¤æ–­ã¨ãã®ç†ç”±

### 7.1 ãªãœ 2 ã‚¹ãƒ†ãƒƒãƒ—ç¿»è¨³ã‹

Claude CLI ã«å¯¾ã—ã¦ 1 å›žã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§ã€Œç¿»è¨³ + ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿æŠ½å‡ºã€ã‚’è¡Œã†ã¨ã€JSON ã®æ§‹æ–‡ã‚¨ãƒ©ãƒ¼ã‚„å‡ºåŠ›å½¢å¼ã®æ··åœ¨ãŒé »ç™ºã—ãŸã€‚
æœ¬æ–‡ç¿»è¨³ï¼ˆãƒ—ãƒ¬ãƒ¼ãƒ³ãƒ†ã‚­ã‚¹ãƒˆå‡ºåŠ›ï¼‰ã¨ ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿æŠ½å‡ºï¼ˆJSON å‡ºåŠ›ï¼‰ã‚’åˆ†é›¢ã™ã‚‹ã“ã¨ã§ã€ãã‚Œãžã‚Œã®å‡ºåŠ›å“è³ªãŒå®‰å®šã—ãŸã€‚

### 7.2 ãªãœãƒ­ãƒ¼ã‚«ãƒ«ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‹

ç¿»è¨³ã®ãŸã³ã« Notion DB ã‚’å…¨ä»¶ã‚¯ã‚¨ãƒªã™ã‚‹ã¨ API ã‚³ã‚¹ãƒˆã¨å¾…ã¡æ™‚é–“ãŒå¤§ãã„ã€‚
`article-index.json` ã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã™ã‚‹ã“ã¨ã§ã€é€šå¸¸ã®ç¿»è¨³æ™‚ã¯ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿ã®ã¿ã§æ¸ˆã‚€ã€‚
å®Œå…¨ãªãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãŒå¿…è¦ãªå ´åˆã¯ `index` ã‚³ãƒžãƒ³ãƒ‰ã§å†æ§‹ç¯‰ã™ã‚‹ã€‚

### 7.3 ãªãœã‚»ãƒƒã‚·ãƒ§ãƒ³å¿…é ˆã‹

ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ Medium æœ‰æ–™ä¼šå“¡ã§ã‚ã‚Šã€èª­ã¿ãŸã„è¨˜äº‹ã¯ã»ã¼å…¨ã¦æœ‰æ–™è¨˜äº‹ã€‚
ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ã§ãªã‘ã‚Œã°æœ¬æ–‡ã‚’å–å¾—ã§ããªã„ãŸã‚ã€ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®å­˜åœ¨ã‚’å‰æã¨ã—ã€ãªã‘ã‚Œã°å³åº§ã«ã‚¨ãƒ©ãƒ¼ã«ã™ã‚‹ã€‚

### 7.4 ãªãœ DOM ãƒ„ãƒªãƒ¼ã‚¦ã‚©ãƒ¼ã‚«ãƒ¼ã‹

Medium ã® DOM æ§‹é€ ã¯é »ç¹ã«å¤‰ã‚ã‚‹ã€‚ç‰¹å®šã® CSS ã‚¯ãƒ©ã‚¹ã‚„ data-testid ã«ä¾å­˜ã™ã‚‹ã¨å£Šã‚Œã‚„ã™ã„ã€‚
`article` â†’ `main` â†’ `body` ã®é †ã§ã‚³ãƒ³ãƒ†ãƒŠã‚’æŽ¢ã—ã€ãã®ä¸­ã‚’å†å¸°çš„ã«èµ°æŸ»ã™ã‚‹æ–¹å¼ã«ã™ã‚‹ã“ã¨ã§ã€DOM å¤‰æ›´ã¸ã®è€æ€§ã‚’é«˜ã‚ã¦ã„ã‚‹ã€‚

### 7.5 ãªãœæ§‹é€ åŒ–è¦ç´„ã‹

å˜ãªã‚‹ã€Œ3è¡Œè¦ç´„ã€ã§ã¯ EM ã¨ã—ã¦ã®ãƒŠãƒ¬ãƒƒã‚¸è“„ç©ã«ä¸ååˆ†ã€‚
ã€Œæ¦‚è¦ â†’ å­¦ã³ â†’ æ´»ç”¨ â†’ é–¢é€£ã€ã® 4 è¦³ç‚¹ã§æ§‹é€ åŒ–ã™ã‚‹ã“ã¨ã§ã€èª­ã¿è¿”ã—ãŸã¨ãã®å®Ÿç”¨æ€§ã‚’é«˜ã‚ã¦ã„ã‚‹ã€‚

---

## 8. Notion DB ã‚¹ã‚­ãƒ¼ãƒž

ç¿»è¨³å…ˆã® Notion ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ã¯ä»¥ä¸‹ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒå¿…è¦:

| ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£å | Notion åž‹ | è¨­å®šå…ƒ |
|------------|----------|--------|
| `åå‰` | Title | è‡ªå‹•ï¼ˆæ—¥è‹±ä½µè¨˜ã‚¿ã‚¤ãƒˆãƒ«ï¼‰ |
| `URL` | URL | è‡ªå‹•ï¼ˆå…ƒè¨˜äº‹ URLï¼‰ |
| `read date` | Date | è‡ªå‹•ï¼ˆå®Ÿè¡Œæ—¥ï¼‰ |
| `Categories` | Multi-select | è‡ªå‹•ï¼ˆAI åˆ†é¡žï¼‰ |
| `Score` | Number | æ‰‹å‹•ï¼ˆ`-s` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰ |

---

## 9. CLI ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ­ãƒ¼

### 9.1 åˆå›žã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
# 1. ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install -e .
playwright install chromium

# 2. è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
medium-notion setup

# 3. Medium ãƒ­ã‚°ã‚¤ãƒ³ï¼ˆãƒ–ãƒ©ã‚¦ã‚¶ãŒé–‹ãï¼‰
medium-notion login

# 4. æŽ¥ç¶šãƒ†ã‚¹ãƒˆ
medium-notion test
```

### 9.2 æ—¥å¸¸ã®ç¿»è¨³ä½œæ¥­

```bash
# 1è¨˜äº‹ã‚’ç¿»è¨³ã—ã¦ Notion ã«è¿½åŠ 
medium-notion translate -u 'https://medium.com/@user/article-abc123'

# ã‚¹ã‚³ã‚¢ä»˜ã
medium-notion translate -u 'https://medium.com/@user/article-abc123' -s 8

# ãƒ–ãƒ©ã‚¦ã‚¶ã‚’è¡¨ç¤ºã—ã¦å®Ÿè¡Œï¼ˆãƒ‡ãƒãƒƒã‚°æ™‚ï¼‰
medium-notion translate -u 'https://medium.com/@user/article-abc123' --gui
```

### 9.3 è¤‡æ•°è¨˜äº‹ã®ä¸€æ‹¬ç¿»è¨³

```bash
# URL ãƒªã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ
cat > urls.txt << 'EOF'
# ä»Šé€±èª­ã¿ãŸã„è¨˜äº‹
https://medium.com/@user/article-1-abc123
https://medium.com/@user/article-2-def456
https://medium.com/@user/article-3-ghi789
EOF

# ä¸€æ‹¬ç¿»è¨³ï¼ˆå‡¦ç†æ¸ˆã¿è¨˜äº‹ã¯è‡ªå‹•ã‚¹ã‚­ãƒƒãƒ—ï¼‰
medium-notion batch -f urls.txt

# ã‚¹ã‚³ã‚¢ä»˜ããƒ»ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒ«60ç§’
medium-notion batch -f urls.txt -s 7 -i 60
```

### 9.4 ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹

```bash
# è¨˜äº‹ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’ Notion DB ã‹ã‚‰å†æ§‹ç¯‰
medium-notion index

# ã‚»ãƒƒã‚·ãƒ§ãƒ³æœŸé™åˆ‡ã‚Œæ™‚ã®å†ãƒ­ã‚°ã‚¤ãƒ³
medium-notion login
```

---

## 10. ä»Šå¾Œã®æ‹¡å¼µæ–¹é‡

é–‹ç™ºæ™‚ã«ä»¥ä¸‹ã®æ–¹é‡ã‚’å®ˆã‚‹ã“ã¨:

1. **EM æ±Žç”¨ãƒ„ãƒ¼ãƒ«ã¨ã—ã¦ç¶­æŒ**: ç‰¹å®šãƒ—ãƒ­ãƒ€ã‚¯ãƒˆï¼ˆTOKI ç­‰ï¼‰ã«ä¾å­˜ã™ã‚‹æ©Ÿèƒ½ã‚’å…¥ã‚Œãªã„
2. **2 ã‚¹ãƒ†ãƒƒãƒ—æ–¹å¼ã‚’ç¶­æŒ**: ç¿»è¨³ã¨ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿æŠ½å‡ºã¯åˆ†é›¢ã—ãŸã¾ã¾
3. **æ—©æœŸãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³å„ªå…ˆ**: ç„¡åŠ¹ãªå…¥åŠ›ã§ Claude ã‚’å‘¼ã°ãªã„
4. **ã‚»ãƒƒã‚·ãƒ§ãƒ³å¿…é ˆã‚’ç¶­æŒ**: Medium æœ‰æ–™ä¼šå“¡å‰æ
5. **Notion ãƒšãƒ¼ã‚¸ã®è¦–èªæ€§**: ç›®æ¬¡ â†’ è¦ç´„ï¼ˆ4è¦³ç‚¹ï¼‰ â†’ æœ¬æ–‡ â†’ å…ƒè¨˜äº‹ãƒªãƒ³ã‚¯ã®æ§‹æˆã‚’ç¶­æŒ
6. **ãƒ­ãƒ¼ã‚«ãƒ«ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹**: æ¯Žå›ž Notion DB ã‚’ã‚¯ã‚¨ãƒªã—ãªã„

---

## ä»˜éŒ² A: ç’°å¢ƒå¤‰æ•°ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ (.env)

```env
NOTION_API_KEY=ntn_xxxxxxxxxxxxxxxxxxxxxxxxxxxx
NOTION_DATABASE_ID=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
HEADLESS=false
LOG_LEVEL=INFO
CLAUDE_MODEL=sonnet
```

## ä»˜éŒ² B: è¦ç´„ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®è¦³ç‚¹

| # | è¦³ç‚¹ | ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆä¸Šã®æŒ‡ç¤º |
|---|------|-------------------|
| 1 | ðŸ“– æ¦‚è¦ | ã€Œä½•ã«ã¤ã„ã¦ã®è¨˜äº‹ã§ã€çµè«–ã¯ä½•ã‹ã€ã‚’ç°¡æ½”ã« |
| 2 | ðŸ’¡ å­¦ã³ãƒ»æ–°è¦æ€§ | EM ã¨ã—ã¦çŸ¥ã£ã¦ãŠãã¹ãæ–°ã—ã„çŸ¥è¦‹ã€‚æ—¢çŸ¥ã®ä¸€èˆ¬è«–ã¯å«ã‚ãªã„ |
| 3 | ðŸ›  æ´»ç”¨æ–¹æ³• | ã€Œãƒãƒ¼ãƒ ã«ã©ã†å±•é–‹ã§ãã‚‹ã‹ã€ã€Œ1on1 ã‚„æ„æ€æ±ºå®šã§ã©ã†æ´»ã‹ã›ã‚‹ã‹ã€ |
| 4 | ðŸ”— ä»–ã®è¨˜äº‹ã¨ã®é–¢é€£ | éŽåŽ»ã®è¨˜äº‹ä¸€è¦§ã‚’å‚ç…§ã—ã€çµ„ã¿åˆã‚ã›ã¦ä¾¡å€¤ãŒç”Ÿã¾ã‚Œã‚‹ææ¡ˆ |
